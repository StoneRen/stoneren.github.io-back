<!DOCTYPE html>
<html>
  <head>
      <script>
</script> 
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    
    <title>
      sailsjsä¸­çš„æ•°æ®è¿ç§»æ–¹å¼ - StoneRen
    </title>
    <link rel="shortcut icon" href="https://avatars1.githubusercontent.com/u/2187168?s=40&amp;v=4" type="image/x-icon" />
    
<link rel="stylesheet" href="/style/style.css">

  <meta name="generator" content="Hexo 4.2.0"></head>
  <body>
    <!-- <canvas id='pagemap'></canvas> -->
    
    <div id="post-toc" class="animated hiddenToc hide">
      <span class="title">Toc</span>
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#ç›®å½•"><span class="toc-text">ç›®å½•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#alterçš„ä¸¤ä¸ªé—®é¢˜"><span class="toc-text">alterçš„ä¸¤ä¸ªé—®é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å¯åŠ¨æ—¶é—´è¶…æ—¶"><span class="toc-text">å¯åŠ¨æ—¶é—´è¶…æ—¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è¶…æ—¶åæœªè¢«éªŒè¯çš„æ•°æ®ä¼šè¢«åˆ é™¤"><span class="toc-text">è¶…æ—¶åæœªè¢«éªŒè¯çš„æ•°æ®ä¼šè¢«åˆ é™¤</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#é±¼å’Œç†ŠæŒæƒ³å…¼å¾—"><span class="toc-text">é±¼å’Œç†ŠæŒæƒ³å…¼å¾—</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ä½¿ç”¨éå…³ç³»å‹æ•°æ®åº“"><span class="toc-text">ä½¿ç”¨éå…³ç³»å‹æ•°æ®åº“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ä¿®æ”¹ç¨‹åºéƒ¨ç½²æµç¨‹"><span class="toc-text">ä¿®æ”¹ç¨‹åºéƒ¨ç½²æµç¨‹</span></a></li></ol></li></ol>
    </div>
    
    <div id="fixed-menu-wrap">
      <!-- <span class="iconfont icon-sousuo search-box menu-reset"></span> -->
      <span class="icon-toc menu-reset">Nav</span>
      <span class="iconfont icon-arrowup menu-reset"></span>
    </div>
    <div id="fixed-menu">
      <span class="iconfont icon-menu-"></span>
    </div>
    <div id="progress">
      <div class="line"></div>
    </div>
    <!-- <div id="search-shade" class="animated hiddenSearch hide">
      <div class="input-wrap">
        <span class="iconfont icon-sousuo search-box"></span>
        <input type="text" placeholder="Search" />
        <span class="iconfont icon-close"></span>
      </div>
      <div class="search-result">
        <div class="meta">
          <span><b id="result-count">0</b> results found</span>
        </div>
        <ul id="result-box"></ul>
      </div>
    </div> -->
    <div id="menu-mask" class="animated hideMenuMask hide">
      <span class="iconfont icon-close"></span>
      <div class="nav">
        
        <a href="/" class="">
          é¦–é¡µ
        </a>
        
        <a href="/archives" class="">
          æ–‡ç« 
        </a>
        
        <a href="/photo" class="">
          ç…§ç‰‡
        </a>
        
        <a href="/digest" class="">
          ä¹¦æ‘˜
        </a>
        
        <a href="https://github.com/stoneren" target="_blank" rel="noopener" class="">
          github
        </a>
        
      </div>
    </div>
    <div id="header">
      <div class="intro">
        <!-- <a href="/" class="logo" style="background-image: url('/images/logo.jpg')"> </a> -->
        <div class="author"><a href="/">StoneRen</a></div>
      </div>
      <div class="nav">
        <a href="/archives/">æ–‡ç« </a>
        <a href="/photo/">è®°å½•</a>
        <a href="/book/">è¯»ä¹¦</a>
        <a href="/digest/">ä¹¦æ‘˜</a>
      </div>
    </div>
    <div id="side" class="animated bounceInLeft">
      <div class="shrink">
        <a href="/" class="logo" style="background-image: url('/images/logo.jpg')"></a>
        <span class="iconfont icon-menu toggle-icon"></span>
        <a href="#" class="search-box">
          <span class="iconfont icon-sousuo"></span>
        </a>
      </div>
      <div class="magnify">
        <div class="about">
        <div class="author">
            <a href="/archives">
              StoneRen
            </a>
          </div>
          <!-- <a href="/" class="logo" style="background-image: url('/images/logo.jpg')"></a> -->
        </div>

        <div class="nav">
          
          <a href="/" class="">
            é¦–é¡µ
          </a>
          
          <a href="/archives" class="">
            æ–‡ç« 
          </a>
          
          <a href="/photo" class="">
            ç…§ç‰‡
          </a>
          
          <a href="/digest" class="">
            ä¹¦æ‘˜
          </a>
          
          <a href="https://github.com/stoneren" target="_blank" rel="noopener" class="">
            github
          </a>
          
          <a href="#" class="search-box">
            <span class="iconfont icon-sousuo"></span>
          </a>
        </div>
        <div class="bottom">
          <div class="follow">
            
            <a href="https://github.com/stoneren" target="_block">
              <span class="iconfont icon-github"></span>
            </a>
             
          </div>
        </div>
      </div>
    </div>
    <div id="container">
      <div class="main animated bounceInRight delay-0.7s">
        <article class="post-entry">
    <div class="header">
      
      <div class="title">sailsjsä¸­çš„æ•°æ®è¿ç§»æ–¹å¼</div>
      <div class="meta">
        <span class="item">
          <span class="iconfont icon-time-circle"></span>
          <span>2017/07/21</span>
        </span>

        

        

        
          <span class="item">
            <span class="iconfont icon-tag1"></span>
            <span>
                
                  
                    <a href="/tags/sails">sails</a>
                  
                
                  
                    <a href="/tags/model">model</a>
                  
                
                  
                    <a href="/tags/alter">alter</a>
                  
                
                  
                    <a href="/tags/mysqldump">mysqldump</a>
                  
                
            </span>
          </span>
         
      </div>
      <div>
      </div>
    </div>
    <html><head></head><body><h2 id="ç›®å½•">ç›®å½•<a class="post-anchor" href="#ç›®å½•"></a></h2><p>åœ¨<code>sailsjs</code>ä¸­,æœ‰ä¸‰ç§æ•°æ®è¿ç§»æ–¹å¼: <code>safe</code>,<code>alter</code>å’Œ<code>drop</code>.åœ¨å¼€å‘ç¯å¢ƒå’Œæµ‹è¯•ç¯å¢ƒä¸­,ç›´æ¥ä½¿ç”¨<code>alter</code>ä¼šå¾ˆæ–¹ä¾¿çš„è¿›è¡Œæ•°æ®çš„è¿ç§».</p>
<p>å®˜æ–¹å¯¹ä¸‰ç§æ–¹å¼çš„è¯´æ˜ <a href="http://sailsjs.com/documentation/concepts/models-and-orm/model-settings#?database-migrations" target="_blank" rel="noopener">å…·ä½“å¯æŸ¥çœ‹æ­¤é“¾æ¥</a></p>
<table>
<thead>
<tr>
<th align="left"><strong>æ–¹å¼</strong></th>
<th align="left"><strong>è§£é‡Š</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>safe</code></td>
<td align="left">ç³»ç»Ÿä¸ä¼šä¸»åŠ¨è¿ç§»æ•°æ®(åº“),å¿…é¡»æ‰‹åŠ¨æ“ä½œ</td>
</tr>
<tr>
<td align="left"><code>alter</code></td>
<td align="left">è‡ªåŠ¨è¿ç§»æ•°æ®å­—æ®µ,å¹¶è¯•å›¾ä¿å­˜ç°æœ‰æ•°æ®</td>
</tr>
<tr>
<td align="left"><code>drop</code></td>
<td align="left">æ¯æ¬¡å¯åŠ¨ç³»ç»Ÿæ—¶,åˆ é™¤æ‰€æœ‰æ•°æ®,å¹¶ä¸”æ¯æ¬¡é‡å»ºmodel</td>
</tr>
</tbody></table>
<p>åœ¨å®é™…å·¥ä½œä¸­ç¢°åˆ°ä¸¤ä¸ªé—®é¢˜</p>
<ol>
<li><code>alter</code>æ–¹å¼ä¸­,å½“æ•°æ®åº“ä¸­æœ‰æ¯”è¾ƒå¤šçš„æ•°æ®çš„æ—¶å€™(å…¶å®ä¹Ÿä¸å¤š,æ¯”å¦‚6000ä¸ªç”¨æˆ·),åœ¨ç½‘é€Ÿæƒ…å†µä¸å¥½çš„æƒ…å†µ,ä¼šå‡ºç°ä¸¤ä¸ªé—®é¢˜.</li>
<li>åœ¨æ­£å¼ç¯å¢ƒä¸­,æ— æ³•ä½¿ç”¨<code>alter</code>,å¯¼è‡´åœ¨æ­£å¼ç¯å¢ƒä¸‹,å¿…é¡»æ‰‹åŠ¨è¿›è¡Œæ•°æ®åº“çš„è¡¨ç»“æ„ä¿®æ”¹.</li>
</ol>
<h2 id="alterçš„ä¸¤ä¸ªé—®é¢˜"><code>alter</code>çš„ä¸¤ä¸ªé—®é¢˜<a class="post-anchor" href="#alterçš„ä¸¤ä¸ªé—®é¢˜"></a></h2><a id="more"></a>
<p>å®˜æ–¹è¯´æ˜å¦‚ä¸‹:</p>
<blockquote>
<p><strong>Auto-migrations</strong> - Auto-migrations should <code>never be enabled when connecting to a database with data you care about</code>. Instead, use auto-migrations with fake data, or with cached data that you can easily recreate.<br> But if you are using drop or alter, <code>Sails will load every record in your development database into memory, then drop and recreate the physical layer representation of the data</code> (i.e. tables/collections/sets/etc.)</p>
</blockquote>
<p>æ ‡æ³¨çš„åœ°æ–¹,è¯´æ˜ä¸€ä¸‹.<br>åœ¨<code>alter</code>æ¨¡å¼ä¸‹,<code>sails</code>åœ¨å¯åŠ¨çš„æ—¶å€™,ä¼šæŠŠæ¯ä¸€æ¡æ”¾åˆ°å†…å­˜ä¸­,ç„¶ååˆ é™¤å¹¶ä¸”é‡å»ºæ•°æ®.è¿™å°±ä¼šå¯¼è‡´ä¸‹é¢ä¸¤ä¸ªé—®é¢˜</p>
<h3 id="å¯åŠ¨æ—¶é—´è¶…æ—¶">å¯åŠ¨æ—¶é—´è¶…æ—¶<a class="post-anchor" href="#å¯åŠ¨æ—¶é—´è¶…æ—¶"></a></h3><p>æˆ‘çš„æ•°æ®åœ¨<code>6000</code>æ¡,ç½‘é€Ÿåœ¨<code>1m</code>çš„æƒ…å†µ,å¯åŠ¨å¤§çº¦ä¼šæœ‰4åˆ†é’Ÿ,æƒ³æƒ³å°±å¤ªææ€–äº†.å½“ç„¶åœ¨æˆ‘çš„æ­£å¼ç¯å¢ƒä¸­,<code>10000</code>æ¡æ•°æ®,10ç§’å†…å°±å¯ä»¥æå®šäº†.<br><code>sails</code>çš„é»˜è®¤è¶…æ—¶æ—¶é—´æ˜¯<code>60*1000ms</code>,ä¹Ÿå°±æ˜¯1åˆ†é’Ÿ.<br><strong>è§£å†³åŠæ³•:</strong> å»¶é•¿è¶…æ—¶æ—¶é—´.<br>é…ç½®å¦‚ä¸‹:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// config/orm.js</span><br><span class="hljs-built_in">module</span>.exports.orm = {<br>  <span class="hljs-attr">_hookTimeout</span>: <span class="hljs-number">60000</span> <br>};<br><br><span class="hljs-comment">// config/pubsub.js</span><br><span class="hljs-built_in">module</span>.exports.pubsub = {<br>  <span class="hljs-attr">_hookTimeout</span>: <span class="hljs-number">60000</span> <br>};<br></code></pre></td></tr></tbody></table></figure>
<p><strong>æç¤º</strong>: ç½‘ä¸Šè¯´åªéœ€è¦é…ç½®<code>orm</code>å°±å¯ä»¥,ä½†æ˜¯ç»è¿‡å®é™…éªŒè¯,éœ€è¦ä¿®æ”¹ä»¥ä¸Šä¸¤ä¸ªåœ°æ–¹</p>
<h3 id="è¶…æ—¶åæœªè¢«éªŒè¯çš„æ•°æ®ä¼šè¢«åˆ é™¤">è¶…æ—¶åæœªè¢«éªŒè¯çš„æ•°æ®ä¼šè¢«åˆ é™¤<a class="post-anchor" href="#è¶…æ—¶åæœªè¢«éªŒè¯çš„æ•°æ®ä¼šè¢«åˆ é™¤"></a></h3><p>æŒ‰ç…§ä¸Šé¢çš„è¯´æ³•,<code>åœ¨alteræ¨¡å¼ä¸‹,sailsåœ¨å¯åŠ¨çš„æ—¶å€™,ä¼šæŠŠæ¯ä¸€æ¡æ”¾åˆ°å†…å­˜ä¸­,ç„¶ååˆ é™¤å¹¶ä¸”é‡å»ºæ•°æ®.</code>,ä¹Ÿå°±æ˜¯è¯´,å¦‚æœæ•°æ®è¶…æ—¶æ—¶é—´åˆ°äº†,è¿˜æœ‰äº›æ•°æ®æ²¡æœ‰è¢«é‡å»ºå®Œ,é‚£è¿™äº›æ•°æ®å°±ä¼šè¢«ä¸¢å¼ƒ,ä¹Ÿå°±é€ æˆäº†æ•°æ®åº“çš„æ•°æ®ä¸¢å¤±.</p>
<p>è¿™å°±æ˜¯å®˜æ–¹è¯´çš„ <code>never``never``never</code>ä¸è¦åœ¨æ­£å¼ç¯å¢ƒä¸­ä½¿ç”¨<code>alter</code>æ•°æ®è¿ç§»æ–¹å¼</p>
<h2 id="é±¼å’Œç†ŠæŒæƒ³å…¼å¾—">é±¼å’Œç†ŠæŒæƒ³å…¼å¾—<a class="post-anchor" href="#é±¼å’Œç†ŠæŒæƒ³å…¼å¾—"></a></h2><p>å‡ºäºå®é™…æƒ…å†µ(å°±æ˜¯æ²¡é’±æ‰¾DBA),æˆ‘æ—¢æƒ³ä½¿ç”¨<code>sails</code>ä¾¿æ·çš„æ•°æ®æ–¹å¼,ä½†æ˜¯ä¹Ÿè¦ä¿è¯æˆ‘çš„æ­£å¼ç¯å¢ƒçš„æ•°æ®ä¸ä¼šè¢«<code>ä¸¢å¼ƒ</code>.ğŸ˜†<br>æš‚æ—¶æƒ³åˆ°æœ‰ä¸¤ç§è§£å†³åŠæ³•.</p>
<h3 id="ä½¿ç”¨éå…³ç³»å‹æ•°æ®åº“">ä½¿ç”¨éå…³ç³»å‹æ•°æ®åº“<a class="post-anchor" href="#ä½¿ç”¨éå…³ç³»å‹æ•°æ®åº“"></a></h3><p>æ¥è‡ªäºå®˜æ–¹çš„è¯´æ˜,ä¹Ÿæ¯”è¾ƒå¥½ç†è§£</p>
<blockquote>
<p>For example, imagine you add a new attribute to one of your model definitions. If that model is configured to use MongoDB, then this is no big deal; you can keep developing as if nothing happened. But if that model is configured to use MySQL, then there is an extra step: a column must be added to the corresponding table (otherwise model methods like .create() will stop working.) So for a model using MySQL, adding an attribute is a breaking change to the database schema. â€“ <a href="http://sailsjs.com/documentation/concepts/models-and-orm/model-settings#?database-migrations" target="_blank" rel="noopener">http://sailsjs.com/documentation/concepts/models-and-orm/model-settings#?database-migrations</a></p>
</blockquote>
<p>ä»¥ä¸Šå¤§ä½“æ„æ€æ˜¯:æ·»åŠ ä¸€ä¸ªå­—æ®µæ—¶,<code>mongodb</code>ä¸ä¼šå—ä»€ä¹ˆå½±å“,ä½†æ˜¯<code>mysql</code>çš„è¯,å°±å¿…é¡»åœ¨è¡¨ä¸­æ·»åŠ è¿™ä¸ªå­—æ®µ,å¦åˆ™ç±»ä¼¼äº<code>create</code>æ–¹æ³•å°±æ— æ³•æ­£å¸¸ä½¿ç”¨äº†<br>æ‰€ä»¥éå…³ç³»å‹æ•°æ®åº“,è²Œä¼¼æ˜¯ä¸€ä¸ªå¥½çš„è§£å†³æ–¹æ¡ˆ,ä½†æ˜¯å®˜æ–¹è¿˜æ˜¯ç»™äº†ä¸€ç›†å†·æ°´:</p>
<blockquote>
<p>Even if all of your models use MongoDB, there are still some breaking schema changes to watch out for. For example, if you add unique: true to one of your attributes, a unique index must be created in MongoDB.</p>
</blockquote>
<p>æ„æ€æ˜¯è¯´,å³ä½¿ä½ å…¨éƒ¨ä½¿ç”¨<code>mongoDB</code>,æ–°å¢<code>å”¯ä¸€ç´¢å¼•</code>å¯¹<code>MongoDB</code>æ¥è¯´ä¹Ÿæ˜¯ä¸€ä¸ª<code>çªç ´æ€§çš„æ¨¡å¼æ”¹å˜</code>,<code>sails</code>è¿˜æ˜¯éœ€è¦å¯¹å…¶è¿›è¡Œä¸Šé¢çš„é‡å»ºæ“ä½œ.</p>
<p>æ‰€ä»¥é‚£äº›ä¸ä¿®æ”¹æ•°æ®åº“å”¯ä¸€ç´¢å¼•çš„æƒ…å†µä¸‹,,<code>mongoDB</code>å¯¹ä½ æ¥è¯´æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©.å¦‚æœä¸æ˜¯è¿™ç§æƒ…å†µ,é‚£ä¹ˆä½ ä¾ç„¶ä¸èƒ½åœ¨æ­£å¼ç¯å¢ƒä¸­ä½¿ç”¨<code>alter</code>æ–¹å¼</p>
<h3 id="ä¿®æ”¹ç¨‹åºéƒ¨ç½²æµç¨‹">ä¿®æ”¹ç¨‹åºéƒ¨ç½²æµç¨‹<a class="post-anchor" href="#ä¿®æ”¹ç¨‹åºéƒ¨ç½²æµç¨‹"></a></h3><p>å¾ˆä¸´æ—¶çš„æ–¹æ¡ˆå°±æ˜¯,æ—¢ç„¶åŸå› å‡ºåœ¨è¶…æ—¶å¯¹æ•°æ®é€ æˆä¸¢å¤±.é‚£ä¹ˆå°±:</p>
<ol>
<li>å¢å¤§è¶…æ—¶æ—¶é—´</li>
<li>åœ¨æ›´æ–°å‰å¤‡ä»½æ•°æ®åº“</li>
</ol>
<p>å…¶å®è¿™ä¸€ä¸ªä¹Ÿä¸ç®—è§£å†³æ–¹æ¡ˆ,åªæ˜¯ä¸€ç§å¦¥åçš„åŠæ³•.</p>
<p>å¦‚æœæœ‰ä¸“ä¸šçš„æ•°æ®åº“äººå‘˜,å¯ä»¥ç»™æä¾›ä¸€ä¸ªæ–¹æ¡ˆ.æ¯”å¦‚æˆ‘å…ˆåœ¨æµ‹è¯•ç¯å¢ƒä¸­æ›´æ–°å®Œæ•°æ®ç»“æ„,ç„¶ååœ¨æ­£å¼ç¯å¢ƒæˆ‘åªæ˜¯æ›´æ–°æ•°æ®ç»“æ„,ä¸åœ¨ç”±<code>sails</code>è¿›è¡Œæ•°æ®ç›‘æµ‹.å…ˆè®°å½•ä¸€ä¸‹,è·å–å¯ä»¥é€šè¿‡ä¿®æ”¹<code>sails</code>çš„é’©å­,å¯ä»¥å®ç°è¿™ä¸ªæ–¹å¼.å·²ç»æ›´æ–°,è¯·å…·ä½“çœ‹æ–°æ–‡ç« <a href="https://stoneren.github.io/2017/07/24/sails%E4%B8%AD%E6%AD%A3%E5%BC%8F%E7%8E%AF%E5%A2%83%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%81%E7%A7%BB/">sailsä¸­æ­£å¼ç¯å¢ƒçš„æ•°æ®åº“è¿ç§»</a></p>
<p><a href="http://sailsjs.com/documentation/concepts/models-and-orm/model-settings" target="_blank" rel="noopener">å®˜æ–¹æŒ‡å¯¼</a></p>
</body></html>


  <div class="post-guide">
    <div class="item left">
        
          <a href="/article/2017/sails%E4%B8%AD%E6%AD%A3%E5%BC%8F%E7%8E%AF%E5%A2%83%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%81%E7%A7%BB/">sailsä¸­æ­£å¼ç¯å¢ƒçš„æ•°æ®åº“è¿ç§»</a>
        
    </div>
    <div class="item right">
        
          <a href="/article/2017/%E4%BD%BF%E7%94%A8hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BAblog/">ä½¿ç”¨hexoæ­å»ºä¸ªäººblog</a>
        
    </div>
  </div>

  

  <!-- <div class="post-copyright">
    <div class="auth">
      æœ¬æ–‡ä½œè€…ï¼š<a href="https://stoneren.github.io">StoneRen</a>
    </div>
    <div class="link">
      æ°¸ä¹…é“¾æ¥ï¼š<a href="https://stoneren.github.io/article/2017/sailsjs%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB%E6%96%B9%E5%BC%8F/">https://stoneren.github.io/article/2017/sailsjs%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB%E6%96%B9%E5%BC%8F/</a>
    </div>
    <div class="declare">
      ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡é¦–å‘äº<a href="https://stoneren.github.io">StoneRen</a>çš„åšå®¢ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
    </div>
  </div> -->

  <!-- <div id="comment"></div> -->


</article>
        <footer>
          <div class="copyright">
            Â©2020
            <a href="https://stoneren.github.io">StoneRen</a> Powered by <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> |
            <a href="https://github.com/shixiaohu2206/hexo-theme-huhu" target="_blank" rel="noopener">hexo-theme-huhu</a>
          </div>
          
        </footer>
      </div>
    </div>
  </body>
  
</html>
<script type="text/javascript">
                  window.HUHU_CONFIG = JSON.parse("{\"service_worker\":{\"open\":false}}")
                </script> <script type="text/javascript">window.addEventListener('load', function() {
    
    window.loadJs = function(d, m, a) {
      var c = document.getElementsByTagName('head')[0] || document.head || document.documentElement
      var b = document.createElement('script')
      b.defer = true
      b.setAttribute('type', 'text/javascript')
      b.setAttribute('charset', 'UTF-8')
      b.setAttribute('async', 'true')
      b.setAttribute('src', d)
      m && b.setAttribute('data-main', '/scripts/app-built')
      if (typeof a === 'function') {
        if (window.attachEvent) {
          b.onreadystatechange = function() {
            var e = b.readyState
            if (e === 'loaded' || e === 'complete') {
              b.onreadystatechange = null
              a()
            }
          }
        } else {
          b.onload = a
        }
      }
      c.appendChild(b)
    }
    window.loadJs && window.loadJs('https://cdn.bootcss.com/require.js/2.3.6/require.min.js', true, function() {require.config({"paths":{"util":"util","share":"share","search":"search","registerSW":"registerSW","valine":"cdn/Valine.min","av":["https://cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min"],"pjax":["https://cdn.bootcss.com/jquery.pjax/2.0.1/jquery.pjax.min"],"jquery":["https://cdn.bootcss.com/jquery/3.4.1/jquery.min"],"confirm":["https://cdn.bootcss.com/jquery-confirm/3.3.4/jquery-confirm.min"],"fancybox":["https://cdn.bootcss.com/fancybox/3.5.7/jquery.fancybox.min"],"chart":["https://cdn.bootcss.com/Chart.js/2.8.0-rc.1/Chart.bundle.min"]},"map":{"*":{"css":"https://cdn.bootcss.com/require-css/0.1.10/css.min.js"}},"shim":{"fancybox":{"deps":["css!https://cdn.bootcss.com/fancybox/3.5.7/jquery.fancybox.min.css"]},"confirm":{"deps":["css!https://cdn.bootcss.com/jquery-confirm/3.3.4/jquery-confirm.min.css"]},"chart":{"deps":["css!https://cdn.bootcss.com/Chart.js/2.8.0-rc.1/Chart.min.css"]}},"waitSeconds":3})})
  })</script> <script type="text/javascript">
                  ;(function() {
                    var bp = document.createElement('script')
                    var curProtocol = window.location.protocol.split(':')[0]
                    if (curProtocol === 'https') {
                      bp.src = 'https://zz.bdstatic.com/linksubmit/push.js'
                    } else {
                      bp.src = 'http://push.zhanzhang.baidu.com/push.js'
                    }
                    var s = document.getElementsByTagName('script')[0]
                    s.parentNode.insertBefore(bp, s)
                  })()
                </script> 
